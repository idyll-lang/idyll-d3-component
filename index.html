<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
      <title>
        d3 + Idyll
      </title>
      <meta property="og:title" content="d3 + Idyll">
    <meta charset="utf-8">
    <meta property="og:type" content="article">

      <meta property="og:description" content="An introduction to using d3 and Idyll">
      <meta property="description" content="An introduction to using d3 and Idyll">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="idyll-mount">
      <div class="idyll-root" data-reactroot="" data-reactid="1" data-react-checksum="-1770429184"><meta title="d3 + Idyll" data-reactid="2"/><div class="idylllogo" data-reactid="3"></div><header title="Using d3 with Idyll" data-reactid="4"></header><div class="inset" style="max-width:150px;margin:0 auto;" data-reactid="5"><a href="https://bl.ocks.org/mbostock/2d466ec3417722e3568cd83fc35338e3" data-reactid="6"><div class="circlewave" style="width:100%;" data-reactid="7"></div></a></div><p data-reactid="8"><!-- react-text: 9 -->This is a guide for those who are familiar with d3 and wish to use d3 in the idiomatic way,
as opposed to relying on React to handle DOM updates.<!-- /react-text --></p><p data-reactid="10"><!-- react-text: 11 -->Idyll defines a custom <!-- /react-text --><code data-reactid="12"><!-- react-text: 13 -->D3Component<!-- /react-text --></code><!-- react-text: 14 --> that you can use to create a custom d3 component.
To use it, create a class that extends from it, and implements two methods: <!-- /react-text --><code data-reactid="15"><!-- react-text: 16 -->initialize<!-- /react-text --></code><!-- react-text: 17 -->,
and <!-- /react-text --><code data-reactid="18"><!-- react-text: 19 -->update<!-- /react-text --></code><!-- react-text: 20 -->.<!-- /react-text --></p><div class="gist" data-reactid="21"></div><p data-reactid="22"><!-- react-text: 23 -->and in your <!-- /react-text --><code data-reactid="24"><!-- react-text: 25 -->index.idl<!-- /react-text --></code><!-- react-text: 26 --> file, instantiate the component like this:<!-- /react-text --></p><div class="gist" data-reactid="27"></div><p data-reactid="28"><!-- react-text: 29 -->Any properties provided will be available on the props object in the component.<!-- /react-text --></p><h3 data-reactid="30"><!-- react-text: 31 -->iniatialize(node, props)<!-- /react-text --></h3><p data-reactid="32"><!-- react-text: 33 -->The initialize function is called only once when your component first mounts. Use this function to
create any necessary DOM elements and render your component with the initially provided properties.<!-- /react-text --></p><h3 data-reactid="34"><!-- react-text: 35 -->update(props)<!-- /react-text --></h3><p data-reactid="36"><!-- react-text: 37 -->This function is called any time the props object changes. Use this function e.g. to update
your component when bound data changes.<!-- /react-text --></p><h2 data-reactid="38"><!-- react-text: 39 -->Example<!-- /react-text --></h2><p data-reactid="40"><!-- react-text: 41 -->The circle at the top of this post is adapted
from <!-- /react-text --><link href="https://bl.ocks.org/mbostock/2d466ec3417722e3568cd83fc35338e3" data-reactid="42"/><!-- react-text: 43 -->,
which was inspired by <!-- /react-text --><link href="" data-reactid="44"/><!-- react-text: 45 -->. You might be
more familiar with Dave Whyte&#x27;s handle, <!-- /react-text --><link href="https://twitter.com/beesandbombs" data-reactid="46"/><!-- react-text: 47 -->.<!-- /react-text --></p><p data-reactid="48"><!-- react-text: 49 -->To use the block, I can just stick the code into the <!-- /react-text --><code data-reactid="50"><!-- react-text: 51 -->initialize<!-- /react-text --></code><!-- react-text: 52 --> function. Since this doesn&#x27;t take any user
input or have dynamic properties, I can omit the <!-- /react-text --><code data-reactid="53"><!-- react-text: 54 -->update<!-- /react-text --></code><!-- react-text: 55 --> function altogether.<!-- /react-text --></p><div class="gist" data-reactid="56"></div><p data-reactid="57"><!-- react-text: 58 -->The only changes I&#x27;ve made were to make the radius of the circle dynamic, and to
insert an <!-- /react-text --><code data-reactid="59"><!-- react-text: 60 -->&lt;svg&gt;<!-- /react-text --></code><!-- react-text: 61 --> element instead of expecting one to be on the page already.<!-- /react-text --></p><h2 data-reactid="62"><!-- react-text: 63 -->Updating props<!-- /react-text --></h2><div class="force" data-reactid="64"></div><button data-reactid="65"><!-- react-text: 66 -->
Toggle Color<!-- /react-text --></button><div class="gist" data-reactid="67"></div><p data-reactid="68"><!-- react-text: 69 -->To make this work, I&#x27;ve adapted code from this <!-- /react-text --><link href="https://bl.ocks.org/mbostock/ad70335eeef6d167bc36fd3c04378048" data-reactid="70"/><!-- react-text: 71 -->
and added a property to determine the node color. Since this example uses a draw loop to render
to canvas, I can simply read the node color property each loop. The final piece to make it work smoothly
is to ensure that the draw loop is triggered every time the properties update.<!-- /react-text --></p><div class="gist" data-reactid="72"></div><p data-reactid="73"><!-- react-text: 74 -->Read more about Idyll at <!-- /react-text --><link href="https://idyll-lang.github.io/" data-reactid="75"/><!-- react-text: 76 -->,
or <!-- /react-text --><link href="https://github.com/idyll-lang/idyll-d3-component/tree/master/examples/basic" data-reactid="77"/><!-- react-text: 78 -->.<!-- /react-text --></p></div>
    </div>
    <script src="index.js"></script>
  </body>
</html>
